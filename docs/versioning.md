# 版本号规范指南

## 语义化版本规范

本项目采用 [语义化版本 2.0.0](https://semver.org/) 规范。

### 有效版本号格式

有效的版本号必须遵循 `MAJOR.MINOR.PATCH` 格式：

- **MAJOR** (主版本号): 当你做了不兼容的 API 修改时递增
- **MINOR** (次版本号): 当你做了向下兼容的功能性新增时递增  
- **PATCH** (修订号): 当你做了向下兼容的问题修正时递增

### 有效示例

- `1.0.0` - ✓ 有效
- `1.2.3` - ✓ 有效
- `2.10.15` - ✓ 有效
- `0.1.0` - ✓ 有效 (初始开发版本)

### 无效示例

- `v1.0.0.14` - ✗ 无效 (四个数字段)
- `1.0` - ✗ 无效 (缺少修订号)
- `1.0.0.0` - ✗ 无效 (四个数字段)
- `1.0.0-beta` - ✗ 无效 (包含预发布标识)

## GitHub Release 标签格式

创建 GitHub Release 时，请使用以下格式：

### 推荐格式
```
1.0.0
1.2.3
2.0.0
```

### 可接受格式（会自动清理）
```
v1.0.0  # 'v' 前缀会被自动移除
V2.1.0  # 'V' 前缀会被自动移除
```

## 版本号递增指南

### 何时递增 MAJOR 版本
- 破坏性 API 更改
- 移除重要功能
- 架构重大重构

### 何时递增 MINOR 版本  
- 添加新功能
- 重要的性能优化
- 新增配置选项

### 何时递增 PATCH 版本
- Bug 修复
- 小的性能改进
- 文档更新
- 依赖项更新

## 自动化构建

GitHub Actions 工作流会自动：
1. 验证版本号格式
2. 清理前缀（移除 'v' 或 'V'）
3. 生成 Docker 镜像标签
4. 构建并推送镜像

## 故障排除

### 版本号格式错误
如果看到错误 `v1.0.0.14 is not a valid semver`，请检查：
- 版本号是否只有三个数字段
- 是否移除了多余的 'v' 前缀
- 是否使用了正确的分隔符 `.`

### 构建失败
如果构建失败，请：
1. 检查前端依赖是否正确安装
2. 验证 TypeScript 配置
3. 查看构建日志获取详细信息
